<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Sesli Zikirmatik</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  font-family: Arial, sans-serif;
  text-align: center;
  background: #111;
  color: #fff;
  padding: 20px;
}
select, button {
  font-size: 18px;
  padding: 10px;
  margin: 10px;
}
#count {
  font-size: 48px;
  margin: 20px;
}
</style>
</head>

<body>

<h1>ðŸ•‹ Sesli Zikirmatik</h1>

<select id="esma">
  <option value="ALLAH">ALLAH</option>
  <option value="RAHMAN">RAHMAN</option>
  <option value="RAHÄ°M">RAHÄ°M</option>
  <option value="LATÄ°F">LATÄ°F</option>
  <option value="FETTAH">FETTAH</option>
</select>

<br>

<select id="target">
  <option value="33">33</option>
  <option value="99">99</option>
  <option value="100">100</option>
</select>

<div id="count">0</div>

<button id="start">ðŸŽ¤ BaÅŸlat</button>
<button id="stop">â›” Durdur</button>

<script>
let count = 0;
let recognition;

document.getElementById("start").onclick = () => {
  const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
  if (!SpeechRecognition) {
    alert("TarayÄ±cÄ± ses tanÄ±mayÄ± desteklemiyor");
    return;
  }

  recognition = new SpeechRecognition();
  recognition.lang = "tr-TR";
  recognition.continuous = true;

  recognition.onresult = (event) => {
    const spoken = event.results[event.results.length - 1][0].transcript
      .toUpperCase()
      .replace(/Ä°/g,"I");

    const esma = document.getElementById("esma").value;
    const hedef = Number(document.getElementById("target").value);

    const kalip = `YA ${esma} CELLE VE CELALÃœHÃœ`;

    if (spoken.includes(kalip)) {
      count++;
      document.getElementById("count").innerText = count;
      navigator.vibrate?.(200);

      if (count >= hedef) {
        recognition.stop();
        navigator.vibrate?.([300,200,300]);
        alert("ðŸŽ‰ Hedefe ulaÅŸÄ±ldÄ±");
      }
    }
  };

  recognition.start();
  alert("Dinleme baÅŸladÄ±.\nÃ–rnek:\nYA ALLAH CELLE VE CELALÃœHÃœ");
};

document.getElementById("stop").onclick = () => {
  recognition?.stop();
};
</script>

</body>
</html>
